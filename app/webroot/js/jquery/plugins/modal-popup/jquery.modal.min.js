;(function($,i,j,k){"use strict";var l='the-modal',defaults={overlayClass:'themodal-overlay',closeOnEsc:true,closeOnOverlayClick:true,onClose:null,onOpen:null};function getContainer(){var a='body';if(j.all&&!j.querySelector){a='html'}return $(a)}function init(f,g){var h=g;if(f.length){f.each(function(){$(this).data(l+'.options',h)})}else{$.extend(defaults,h)}return{open:function(a){var b=f.get(0);var c=$.extend({},defaults,$(b).data(l+'.options'),a);getContainer().addClass('lock');if($('.'+c.overlayClass).length){$.modal().close()}var d=$('<div/>').addClass(c.overlayClass).prependTo('body');d.data(l+'.options',a);if(b){$(b).clone(true).appendTo(d).show()}if(c.closeOnEsc){$(j).bind('keyup.'+l,function(e){if(e.keyCode===27){$.modal().close()}})}if(c.closeOnOverlayClick){d.children().on('click.'+l,function(e){e.stopPropagation()});$('.'+c.overlayClass).on('click.'+l,function(e){$.modal().close()})}$(j).bind('touchmove.'+l,function(e){if(!$(e).parents('.'+c.overlayClass)){e.preventDefault()}});if(c.onOpen){c.onOpen(d,c)}},close:function(){var a=f.get(0);var b=$.extend({},defaults,g);var c=$('.'+b.overlayClass);$.extend(b,c.data(l+'.options'));c.remove();getContainer().removeClass('lock');if(b.closeOnEsc){$(j).unbind('keyup.'+l)}if(b.onClose){b.onClose(c,b)}}}}$.modal=function(a){return init($(),a)};$.fn.modal=function(a){return init(this,a)}})(jQuery,window,document);